<Window x:Class="GameGuard.UI.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="GameGuard Settings"
        Height="530" Width="740"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TabControl Grid.Row="0">

            <!-- ===== BLOCKED APPS ===== -->
            <TabItem Header="Blocked Apps">
                <Grid Margin="6">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <ListView x:Name="AppsListView" Grid.Row="0" SelectionMode="Single">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="Process Name" Width="160"
                                                DisplayMemberBinding="{Binding ProcessName}"/>
                                <GridViewColumn Header="Path" Width="390"
                                                DisplayMemberBinding="{Binding Path}"/>
                                <GridViewColumn Header="Path Pinned" Width="90"
                                                DisplayMemberBinding="{Binding PathPinned}"/>
                            </GridView>
                        </ListView.View>
                    </ListView>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,8,0,0">
                        <Button Content="Add Appâ€¦" Width="90" Margin="0,0,8,0" Click="AddApp_Click"/>
                        <Button Content="Remove Selected" Width="120" Margin="0,0,16,0" Click="RemoveApp_Click"/>
                        <CheckBox x:Name="PinPathCheckBox"
                                  Content="Pin to exact path (recommended)"
                                  IsChecked="True"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- ===== SCHEDULE ===== -->
            <TabItem Header="Schedule">
                <Grid Margin="6">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <ListView x:Name="ScheduleListView" Grid.Row="0" SelectionMode="Single">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="Allowed Days" Width="310"
                                                DisplayMemberBinding="{Binding DaysDisplay}"/>
                                <GridViewColumn Header="From" Width="80"
                                                DisplayMemberBinding="{Binding Start}"/>
                                <GridViewColumn Header="To" Width="80"
                                                DisplayMemberBinding="{Binding End}"/>
                            </GridView>
                        </ListView.View>
                    </ListView>

                    <!-- New entry builder -->
                    <GroupBox Grid.Row="1" Header="Add Allowed Window" Margin="0,8,0,0" Padding="8,4">
                        <StackPanel>
                            <WrapPanel Margin="0,2,0,6">
                                <CheckBox x:Name="DaySun" Content="Sun" Margin="0,0,10,0"/>
                                <CheckBox x:Name="DayMon" Content="Mon" Margin="0,0,10,0" IsChecked="True"/>
                                <CheckBox x:Name="DayTue" Content="Tue" Margin="0,0,10,0" IsChecked="True"/>
                                <CheckBox x:Name="DayWed" Content="Wed" Margin="0,0,10,0" IsChecked="True"/>
                                <CheckBox x:Name="DayThu" Content="Thu" Margin="0,0,10,0" IsChecked="True"/>
                                <CheckBox x:Name="DayFri" Content="Fri" Margin="0,0,10,0" IsChecked="True"/>
                                <CheckBox x:Name="DaySat" Content="Sat"/>
                            </WrapPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Allowed from " VerticalAlignment="Center"/>
                                <TextBox x:Name="StartTimeBox" Width="60" Margin="4,0" Text="21:00"/>
                                <TextBlock Text=" to " VerticalAlignment="Center"/>
                                <TextBox x:Name="EndTimeBox" Width="60" Margin="4,0" Text="23:00"/>
                                <TextBlock Text=" (24-hour HH:mm)" VerticalAlignment="Center"
                                           Foreground="Gray" Margin="4,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>

                    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,8,0,0">
                        <Button Content="Add Entry" Width="90" Margin="0,0,8,0" Click="AddSchedule_Click"/>
                        <Button Content="Remove Selected" Width="120" Click="RemoveSchedule_Click"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- ===== ADVANCED ===== -->
            <TabItem Header="Advanced">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="210"/>
                        <ColumnDefinition Width="90"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Label Grid.Row="0" Grid.Column="0" Content="Poll Interval (seconds):"
                           VerticalAlignment="Center"/>
                    <TextBox Grid.Row="0" Grid.Column="1" x:Name="PollIntervalBox"
                             Margin="0,4" VerticalAlignment="Center"/>

                    <Label Grid.Row="1" Grid.Column="0" Content="Grace Period (seconds):"
                           VerticalAlignment="Center"/>
                    <TextBox Grid.Row="1" Grid.Column="1" x:Name="GraceSecondsBox"
                             Margin="0,4" VerticalAlignment="Center"/>

                    <Label Grid.Row="2" Grid.Column="0" Content="Toast Cooldown (seconds):"
                           VerticalAlignment="Center"/>
                    <TextBox Grid.Row="2" Grid.Column="1" x:Name="ToastCooldownBox"
                             Margin="0,4" VerticalAlignment="Center"/>

                    <TextBlock Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3"
                               Margin="0,14,0,0" TextWrapping="Wrap"
                               Foreground="Gray" FontStyle="Italic">
                        For multiple or complex schedule windows, you can also edit<LineBreak/>
                        %AppData%\GameGuard\config.json directly while the app is stopped.
                    </TextBlock>
                </Grid>
            </TabItem>

        </TabControl>

        <!-- Bottom bar -->
        <StackPanel Grid.Row="1" Orientation="Horizontal"
                    HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="Save" Width="80" Margin="0,0,8,0"
                    IsDefault="True" Click="Save_Click"/>
            <Button Content="Cancel" Width="80"
                    IsCancel="True" Click="Cancel_Click"/>
        </StackPanel>
    </Grid>
</Window>
